# 0. serviceAccountKey.json herbekommen


# 1. Construktor um AngularFireAuth erweitern

constructor(private http: HttpClient,public afAuth: AngularFireAuth) { }

# 2. on init einfügen/ergänzen und header auserhalb definieren

  headers: HttpHeaders | undefined;

ngOnInit() {

    this.afAuth.authState.subscribe(async user => {
      if (user) {
        // Obtain the Firebase ID token
        const idToken = await user.getIdToken(true);
        // Send the ID token in the Authorization header
        this.headers = new HttpHeaders().set('Authorization', idToken);
      } else {
        // Handle the case where the user is not signed in
      }
    });

  }

# 3. zu jeder request header anfügen

,{headers: this.headers}
